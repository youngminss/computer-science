## 3계층형 시스템

### Contents

- `프로세스`
- `스레드` 
- `OS커널`

---

### 웹 시스템

+ `웹 서버` : 웹 브라우저로 부터 받은 요청을 처리하는 웹 서버
+ `AP 서버` : 웹 서버 <-> DB 서버의 중간 다리 역할을 제공하는 AP 서버
+ `DB 서버` : 데이터를 저장하는 DB 서버

흔히, **3계층 아키텍쳐**로 구성되어 있음을 알아야해요.

### 프로세스 & 스레드
> **프로세스** : 메모리에 적재되어 실행중인 프로그램   
> **스레드** : 프로세스 안에서 실행되는 여러 흐름(작업) 단위

프로세스 및 스레드가 활동하려면 `메모리 공간`이 필요합니다.

이 `메모리 공간`은 `커널(kernel)`이란 것을 통해 메모리 상에 확보합니다.
다양한 처리를 위해, 데이터를 주고받기 위해선, 이 공간을 확보해서 사용해야합니다.

**프로세스 vs 스레드의 가장 큰 차이점**

+ `웹 서버`는 프로세스가 **각각의** 메모리 공간을 가진다.
+ `AP 서버`는 스레드가 하나의 메모리 공간을 **공유** 한다.

비유하자면

+ `프로세스` : 맞벌이 부부가 통장을 각자 관리하고 있는 형태
+ `스레드` : 집안의 가장 혼자 통장이 있고, 가족을 부양하는 것. 자녀가 많아져도, 통장하나로 먹고 살아야하는 형태

중요한건, 두 형태 모두, 방식은 다르지만, `생활`한다는 목적은 똑같다. 프로세스와 스레드 관계도 이와 같다.

|   | 프로세스  | 스레드  |
| :------------: | :------------: | :------------: |
| 장점  |  개별 처리 독릭성이 높다  | 생성 시 부하가 낮다  |
| 단점 | 생성 시 CPU [부하](http://wiki.hash.kr/index.php/%EB%B6%80%ED%95%98) 가 높다  | 메모리 공간을 공유하기 때문에<br> **의도하지 않은 데이터 읽기/쓰기가 발생할 수 있다.**  |

### OS커널

+ OS에서 인간으로 치면, 심장, 뇌, 척수 같은 존재 (즉, 본질)
+ 무엇보다, 뒤에서 무슨 일이 벌어지는지 은폐하면서도, **편리한 인터페이스를 제공**
+ 커널이 존재하기 때문에, 개발자는 하드웨어, 다른 애플리케이션에 끼치는 영향을 의식하지 않고, 애플리케이션을 만들 수 있는 것이다.

> **커널의 역할**

+ 시스템 콜 인터페이스

	- 애플리케이션이 어떤 처리를 하고 싶으면, [시스템 콜](https://ko.wikipedia.org/wiki/%EC%8B%9C%EC%8A%A4%ED%85%9C_%ED%98%B8%EC%B6%9C)이라고 하는 명령을 이용해서 커널에 명령을 내린다.
	- 이때, 명령은 인터페이스를 통해 전달된다.
	- 명령을 내린 뒤엔, 뒤에서 구체적으로 어떤 처리를 하고 있는지 **프로세스가 의식할 필요가 없다.**
	
+ 프로세스 관리

	- OS상에는 수십,수백,수천 개의 프로세스를 가동할 수 있는 반면, 실제 물리 서버의 CPU 코어 수는 많아야 수십 개 정도
	- 언제, 어떤 프로세스가 어느 정도의 CPU 코어를 이용할 수 있는지, 처리 우선순위를 어떻게 결정 할 것인지 등을 관리한다.
	- OS에게 있어, `인터페이스`와 동시에 가장 중요한 기능

+ 메모리 관리

	- 프로세스가 이용하는 독립 메모리 공간을 확보하거나, 상호 간의 참조 영역을 지키기 위해 **독립성**을 관리하는 등의 메모리 관리 역할
	
+ 네트워크 스택
	
	- 중요 !! (추후, 개별적으로 다룰 예정)
+ 파일 시스템 관리

	- 물리 디스크에 제공된 데이터를 관리하는 기능
	- 물리 디스크에 기록된 데이터는 **010101..** 같은 **이진데이터**에 불과하다.
	- 파일 시스템 덕분에, 애플리케이션은 `파일` 단위로 데이터를 작성하거나 삭제 가능
	- 주요 관리 기능은, 디렉터리 구조 제공, 액세스 관리, 고속화 , 안정성 향상 등이 있다.
	
+ 장치 드라이버

	- 디스크 같은 물리 장치용 인터페이스를 제공한다.
	- 다수의 제조사마다, 독자적인 제품이 있는 만큼, 각각의 대응하는 애플리케이션을 개발하는 것은 현실적으로 힘들다.
	- 커널은, 장치 드라이버를 이용해, 그 아래에 있는 물리 장치를 `은폐`한다.
	- 각 장치 제조사가 OS에 대응하는 장치 드라이버를 제공해서, 해당 OS의 표준 장치로써 커널을 경유해 이용할 수 있는 것이다.











